(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[962],{546:(t,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>u});var e=i(43),s=i(393),o=i.n(s),r=i(579);class c extends e.Component{constructor(){super(),this.state={curSubTab:"CX"}}onClickSubNav(t,n){this.state.curSubTab!==t&&(o().publish(`CLICK_${t}`),this.setState({curSubTab:t}))}render(){return(0,r.jsxs)("div",{className:"home-header",children:[this.props.mainTitle&&(0,r.jsxs)("h2",{children:[this.props.mainTitle,(0,r.jsxs)("span",{children:["\xa0\xa0",this.props.subTitle]})]}),(0,r.jsxs)("div",{className:"scroller",children:[(0,r.jsx)("button",{onClick:this.onClickSubNav.bind(this,"all"),children:"\u5168\u90e8"}),(0,r.jsx)("button",{onClick:this.onClickSubNav.bind(this,"CX"),children:"\u7a0b\u6f47"}),(0,r.jsx)("button",{onClick:this.onClickSubNav.bind(this,"OYNN"),children:"\u6b27\u9633\u5a1c\u5a1c"}),(0,r.jsx)("button",{onClick:()=>this.props.changeNavigation("\u5b50\u4f20\u7236,\u8521\u5f90\u5764"),children:"\u8521\u5f90\u5764"}),(0,r.jsx)("button",{onClick:()=>this.props.changeNavigation("\u5b50\u4f20\u7236,Lisa"),children:"Lisa"}),(0,r.jsx)("button",{onClick:()=>o().publish("CLICK_VIEW","\u5144\u5f1f\u4f20\u503c,\u83ab\u6587\u851a"),children:"\u83ab\u6587\u851a"}),(0,r.jsx)("button",{onClick:()=>o().publish("CLICK_NAVIGATION","\u5144\u5f1f\u4f20\u503c,\u8521\u5065\u96c5"),children:"\u8521\u5065\u96c5"}),(0,r.jsx)("button",{onClick:()=>this.props.changeNavigation("\u4efb\u5bb6\u8431"),children:"\u4efb\u5bb6\u8431\uff08Selina\uff09"}),(0,r.jsx)("button",{onClick:()=>this.props.changeNavigation("\u7530\u99a5\u7504"),children:"\u7530\u99a5\u7504\uff08Hebe\uff09"}),(0,r.jsx)("button",{onClick:()=>this.props.changeNavigation("\u9648\u5609\u6866"),children:"\u9648\u5609\u6866\uff08Ella\uff09"})]})]})}}c.defaultProps={mainTitle:"",subTitle:"\u5b50\u6807\u9898"};class a extends e.Component{constructor(t){super(t),this.state={loading:!1,columnMaxHeight:0,showList:[]},o().subscribe("CLICK_VIEW",((t,n)=>{console.log("\u6536\u5230\u5144\u5f1f\u8282\u70b9\u4f20\u6765\u7684\u6570\u636e\uff1a",n)})),o().subscribe("CLICK_NAVIGATION",((t,n)=>{console.log("\u6536\u5230\u5144\u5f1f\u8282\u70b9\u4f20\u6765\u7684\u6570\u636e\uff1a",n)})),o().subscribe("CLICK_CX",((t,n)=>{this.setState({showList:[]})})),o().subscribe("CLICK_OYNN",((t,n)=>{this.setState({showList:[]})}))}onClickMoreBtn(){this.state.loading||(this.setState({loading:!0}),new Promise(((t,n)=>{setTimeout((()=>{t(["./imgs/\u7a0b\u6f47/219349120_800300317313609_7691747447293727933_n.jpeg","./imgs/\u7a0b\u6f47/299180709_475571564022110_5374496400830654462_n.jpeg","./imgs/\u7a0b\u6f47/300303054_1084974882129458_4224607917202559964_n.jpeg","./imgs/\u7a0b\u6f47/306888316_162876029730162_4854338851575757367_n.jpeg","./imgs/\u7a0b\u6f47/311041305_892539975485437_3147370924777353167_n.jpeg","./imgs/\u7a0b\u6f47/312307266_181255794448433_525019733613779645_n.jpeg","./imgs/\u7a0b\u6f47/313473116_1801367296900889_5407976365198015837_n.jpeg","./imgs/\u7a0b\u6f47/314516581_1129578357676896_6431834982245957333_n.jpeg","./imgs/\u7a0b\u6f47/315761796_454019013338901_3773517364246318115_n.jpeg","./imgs/\u7a0b\u6f47/317639905_446871580960868_6108901046441575627_n.jpeg","./imgs/\u7a0b\u6f47/319801814_154315077378726_9055366276893967024_n.jpeg","./imgs/\u7a0b\u6f47/61393547_1137367256463210_5197723238380936812_n.jpeg"])}),500*Math.random())})).then((t=>{this.setState({loading:!1}),this.load(t.map((t=>t)))})))}loadMore(){}async load(t){for(let n=0;n<t.length;n++){let i=t[n],e=await l(i).catch((t=>{console.log("err \u52a0\u8f7d\u56fe\u7247\u9519\u8bef\uff1a",i,t)}));if(!e)return;let s=this.columnWidth/(e.width/e.height)+this.columnGap,o=Math.min(...this.columnHeightArr),r=this.columnHeightArr.indexOf(o),c={url:i,image:e,top:o,left:r*(this.columnWidth+this.columnGap)};this.columnHeightArr[r]=o+s,this.setState({columnMaxHeight:Math.max(...this.columnHeightArr),showList:this.state.showList.concat(c)})}}async componentDidMount(){let{columnCount:t,columnWidth:n,columnGap:i}=function(){let t=2,n=5,i=(window.innerWidth-10-n)/2;return t=t>4?4:t<1?1:t,{columnCount:t,columnGap:n,columnWidth:i}}();this.columnGap=i,this.columnCount=t,this.columnWidth=n,this.columnHeightArr=Array.apply(null,{length:this.columnCount}).map((()=>0)),this.onClickMoreBtn()}render(){return(0,r.jsxs)("div",{className:"home-body",children:[(0,r.jsx)("div",{className:"list",style:{height:this.state.columnMaxHeight+"px"},children:this.state.showList.map(((t,n)=>(0,r.jsx)("div",{className:"list-item",style:{width:this.columnWidth+"px",left:t.left+"px",top:t.top+"px"},children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:t.url||"./default.gif"})})},n)))}),(0,r.jsx)("div",{className:"more-btn",onClick:this.onClickMoreBtn.bind(this),children:this.state.loading?"\u52a0\u8f7d\u4e2d...":"\u52a0\u8f7d\u66f4\u591a..."})]})}}function l(t){return new Promise(((n,i)=>{let e=new Image;e.src=t,e.onload=()=>{n(e)},e.onerror=t=>{i(t)}}))}class u extends e.Component{constructor(t){super(t),this.state={currentNavigation:""},this.changeNavigation=t=>{this.setState({currentNavigation:t})}}render(){return(0,r.jsxs)("div",{className:"home",children:[(0,r.jsx)(c,{mainTitle:"\u56fe\u7247\u6b23\u8d4f",changeNavigation:this.changeNavigation}),(0,r.jsx)(a,{currentNavigation:this.state.currentNavigation})]})}}},393:function(t,n,i){t=i.nmd(t),function(i){"use strict";var e={};i.PubSub?(e=i.PubSub,console.warn("PubSub already loaded, using existing version")):(i.PubSub=e,function(t){var n={},i=-1,e="*";function s(t){var n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n))return!0;return!1}function o(t){return function(){throw t}}function r(t,n,i){try{t(n,i)}catch(e){setTimeout(o(e),0)}}function c(t,n,i){t(n,i)}function a(t,i,e,s){var o,a=n[i],l=s?c:r;if(Object.prototype.hasOwnProperty.call(n,i))for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&l(a[o],t,e)}function l(t,n,i){return function(){var s=String(t),o=s.lastIndexOf(".");for(a(t,t,n,i);-1!==o;)o=(s=s.substr(0,o)).lastIndexOf("."),a(t,s,n,i);a(t,e,n,i)}}function u(t){var i=String(t);return Boolean(Object.prototype.hasOwnProperty.call(n,i)&&s(n[i]))}function h(t){for(var n=String(t),i=u(n)||u(e),s=n.lastIndexOf(".");!i&&-1!==s;)s=(n=n.substr(0,s)).lastIndexOf("."),i=u(n);return i}function p(t,n,i,e){var s=l(t="symbol"===typeof t?t.toString():t,n,e);return!!h(t)&&(!0===i?s():setTimeout(s,0),!0)}t.publish=function(n,i){return p(n,i,!1,t.immediateExceptions)},t.publishSync=function(n,i){return p(n,i,!0,t.immediateExceptions)},t.subscribe=function(t,e){if("function"!==typeof e)return!1;t="symbol"===typeof t?t.toString():t,Object.prototype.hasOwnProperty.call(n,t)||(n[t]={});var s="uid_"+String(++i);return n[t][s]=e,s},t.subscribeAll=function(n){return t.subscribe(e,n)},t.subscribeOnce=function(n,i){var e=t.subscribe(n,(function(){t.unsubscribe(e),i.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){n={}},t.clearSubscriptions=function(t){var i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&0===i.indexOf(t)&&delete n[i]},t.countSubscriptions=function(t){var i,e,s=0;for(i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&0===i.indexOf(t)){for(e in n[i])s++;break}return s},t.getSubscriptions=function(t){var i,e=[];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&0===i.indexOf(t)&&e.push(i);return e},t.unsubscribe=function(i){var e,s,o,r=function(t){var i;for(i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&0===i.indexOf(t))return!0;return!1},c="string"===typeof i&&(Object.prototype.hasOwnProperty.call(n,i)||r(i)),a=!c&&"string"===typeof i,l="function"===typeof i,u=!1;if(!c){for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){if(s=n[e],a&&s[i]){delete s[i],u=i;break}if(l)for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&s[o]===i&&(delete s[o],u=!0)}return u}t.clearSubscriptions(i)}}(e)),void 0!==t&&t.exports&&(n=t.exports=e),n.PubSub=e,t.exports=n=e}("object"===typeof window&&window||this||i.g)}}]);
//# sourceMappingURL=home.6883918b.chunk.js.map